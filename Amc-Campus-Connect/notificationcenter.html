<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notification Center</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Styling for the unread indicator dot */
        .unread-dot::after {
            content: '';
            position: absolute;
            top: 50%;
            right: 1.25rem; /* Corresponds to pr-5 on the parent */
            transform: translateY(-50%);
            width: 8px;
            height: 8px;
            background-color: #3b82f6; /* blue-500 */
            border-radius: 50%;
        }
    </style>
</head>
<body class="bg-#0B0E1A flex items-center justify-center min-h-screen p-4">

    <!-- Main Notification Box -->
    <div id="notification-box" class="w-full max-w-[200vh] bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border dark:border-slate-700">
        <div class="p-4 border-b dark:border-slate-700 flex justify-between items-center">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Notifications</h3>
            <button id="mark-all-read" class="text-sm text-indigo-600 dark:text-indigo-400 hover:underline focus:outline-none">Mark all as read</button>
        </div>
        <div id="notification-list" class="max-h-[60vh] overflow-y-auto">
           <!-- Notifications will be dynamically inserted here -->
        </div>
         <div id="empty-state" class="hidden text-center p-8">
            <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <h3 class="mt-2 text-sm font-medium text-gray-900 dark:text-white">All caught up!</h3>
            <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">You don't have any new notifications.</p>
        </div>
    </div>

    <script>
        // --- MOCK DATA ---
        // In a real app, you'd fetch this from your server.
        let notificationsData = [
            { id: 1, icon: '📢', title: 'Follow the college Dress code and wearing of uniform is compulsory - Principal', timestamp: new Date('2025-10-14T18:00:00'), read: true, link: '#', category: 'This Week' },
            { id: 2, icon: '🎉', title: 'The colloseum is Announced !', timestamp: new Date('2025-10-16T20:28:00'), read: false, link: '#', category: 'New' },
            { id: 3, icon: '🗳️', title: 'A new poll is live: "Whom to invite for colloseum?"', timestamp: new Date('2025-10-16T19:00:00'), read: false, link: '#', category: 'New' },
            { id: 4, icon: '📢', title: 'Reminder: exam fees are due next week.', timestamp: new Date('2025-10-16T15:30:00'), read: false, link: '#', category: 'Earlier Today' },
            { id: 5, icon: '⚽', title: 'The inter-department football match has been rescheduled to Friday.', timestamp: new Date('2025-10-15T11:00:00'), read: true, link: '#', category: 'Yesterday' },
            { id: 6, icon: '📚', title: 'Your reserved book "Data Structures and Algorithms" is now available in the library.', timestamp: new Date('2025-10-14T18:00:00'), read: true, link: '#', category: 'This Week' },
        ];

        // --- DOM ELEMENTS ---
        const notificationList = document.getElementById('notification-list');
        const emptyState = document.getElementById('empty-state');
        const markAllReadBtn = document.getElementById('mark-all-read');

        // --- TIME FORMATTING HELPER ---
        function formatTimeAgo(date) {
            const now = new Date();
            const seconds = Math.floor((now - date) / 1000);
            let interval = seconds / 31536000;
            if (interval > 1) return Math.floor(interval) + " years ago";
            interval = seconds / 2592000;
            if (interval > 1) return Math.floor(interval) + " months ago";
            interval = seconds / 86400;
            if (interval > 1) return Math.floor(interval) + " days ago";
            interval = seconds / 3600;
            if (interval > 1) return Math.floor(interval) + " hours ago";
            interval = seconds / 60;
            if (interval > 1) return Math.floor(interval) + " minutes ago";
            return "Just now";
        }

        // --- CORE LOGIC ---
        function renderNotifications() {
            notificationList.innerHTML = '';
            let currentCategory = '';

            if (notificationsData.length === 0 || notificationsData.every(n => n.read)) {
                // Show empty state if no notifications or all are read for a cleaner look
                // For a persistent list, you could remove the `every` check.
                emptyState.classList.remove('hidden');
                notificationList.classList.add('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            notificationList.classList.remove('hidden');

            notificationsData.forEach(notif => {
                // Add category headers
                if (notif.category !== currentCategory) {
                    currentCategory = notif.category;
                    const categoryHeader = document.createElement('h4');
                    categoryHeader.className = 'px-4 py-2 text-sm font-semibold text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-slate-700/50';
                    categoryHeader.textContent = currentCategory;
                    notificationList.appendChild(categoryHeader);
                }
                
                // Create notification item
                const notifLink = document.createElement('a');
                notifLink.href = notif.link;
                notifLink.className = `flex items-start p-4 hover:bg-gray-50 dark:hover:bg-slate-700 relative ${!notif.read ? 'unread-dot' : ''}`;
                notifLink.dataset.id = notif.id;

                const iconDiv = document.createElement('div');
                iconDiv.className = 'flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 dark:bg-slate-600 flex items-center justify-center text-xl';
                iconDiv.textContent = notif.icon;

                const textDiv = document.createElement('div');
                textDiv.className = 'ml-3 w-0 flex-1';
                
                const titleP = document.createElement('p');
                titleP.className = 'text-sm font-medium text-gray-900 dark:text-white';
                titleP.textContent = notif.title;
                
                const timeP = document.createElement('p');
                timeP.className = 'mt-1 text-sm text-gray-500 dark:text-gray-400';
                timeP.textContent = formatTimeAgo(notif.timestamp);

                textDiv.appendChild(titleP);
                textDiv.appendChild(timeP);
                notifLink.appendChild(iconDiv);
                notifLink.appendChild(textDiv);

                notificationList.appendChild(notifLink);
            });
        }
        
        function markAllAsRead() {
            notificationsData.forEach(notif => notif.read = true);
            renderNotifications();
        }

        // --- EVENT LISTENERS ---
        markAllReadBtn.addEventListener('click', markAllAsRead);
        
        // Mark as read on click
        notificationList.addEventListener('click', (e) => {
            const notifElement = e.target.closest('a');
            if (notifElement) {
                e.preventDefault(); // Prevent navigating if it's just a placeholder link
                const notifId = parseInt(notifElement.dataset.id);
                const notification = notificationsData.find(n => n.id === notifId);
                if (notification && !notification.read) {
                    notification.read = true;
                    // You can add a visual effect before re-rendering
                    notifElement.classList.remove('unread-dot');
                    // Or just re-render the whole list for simplicity
                    renderNotifications(); 
                }
                // In a real app, you would navigate to notifElement.href here
            }
        });

        // Initial Render
        document.addEventListener('DOMContentLoaded', renderNotifications);

    </script>
</body>
</html>

